---
name: Authentication
route: /authentication
---

import { Playground, Props } from 'docz';
import { Paper, Card, CardContent, CardHeader, Avatar, CardActions, IconButton } from '@material-ui/core';
import { Favorite, Share, ExitToApp } from '@material-ui/icons';
import { withAuthentication, Authentication, LoginForm } from '../';
import { loremIpsum } from 'lorem-ipsum';
import moment from 'moment';

# Authentication Components

## withAuthentication

You can wrap any component with `withAuthentication` so that you can require authentication for the component.
It will also give access to the authentication object through the props of the children.
If not already authenticated, it will render the Authenticaiton component.

<Playground>
{() => {
  // Define your React component and optionally access authentication in props.
  function Mission({
    message,
    authentication,
    authentication: {
      user,
      token,
    },
  }) {
    return (
      <Card>
        <CardHeader title={<strong>Clearance Granted</strong>} subheader={moment().format('MMMM Do YYYY, h:mm:ss a')} avatar={<Avatar src={user.avatar_url} />} />
        <CardContent>
          <p>Your mission, should you choose to accept...</p>
          <p><strong><em>{message}</em></strong></p>
        </CardContent>
        <CardActions>
          <IconButton onClick={()=> alert(`Now get out your decoder ring, ${user.full_name}, and get to work!`)}><Favorite /></IconButton>
          <IconButton onClick={()=> alert("Alright Elon, let's not tweet about our missions.")}><Share /></IconButton>
          <IconButton onClick={()=> authentication.logout()}><ExitToApp /></IconButton>
        </CardActions>
      </Card>
    )
  }
  /** Usually you would wrap it during export at the bottom of your component's file.
   *  export default withAuthentication(Component);
   */
  const AuthenticatedMission = withAuthentication(Mission);
  // Then you can use your authentication wrapped component.
  return (
    <Paper>
      <AuthenticatedMission
        //** Pass any props as you normally would. */
        message={loremIpsum()}
        authenticationConfig={{
          tokenid: "PlaygroundTesting",
          server: "https://bg.door43.org",
          /** Optionally override messages. */
          messages: {
            actionText:"Verify Your Identity to See Your Mission",
            genericError: "Nothing to see here, carry on.",
            usernameError: "Your no agent, did you forget your name?",
            passwordError: "Are you sure you are who you think you are?",
          },
        }}
        /** Pass a previously returned authentication object to skip authentication form.
          authentication={{
            user: {...},
            token: {...},
            remember: false,
          }}
          */
      />
    </Paper>
  );
}}
</Playground>

<Props of={withAuthentication} isToggle title="Props" />

## Authentication

This is a functional Authentication component that logs into a Gitea server.
The Authentication component wraps the LoginForm component.

<Playground>
{() => {
  const [authentication, setAuthentication] = React.useState();
  return (
    <Paper>
      <Authentication
        messages={{
          actionText:"Authenticate",
          genericError: "Something happened!",
          usernameError: "No user found?",
          passwordError: "Did you fat finger your password?",
        }}
        config={{
          server: "https://bg.door43.org",
          tokenid:"PlaygroundTesting",
        }}
        authentication={authentication}
        onAuthentication={(data) => {
          setAuthentication(data);
          alert(JSON.stringify(data, null, 2));
        }}
      />
    </Paper>
  );
}}
</Playground>

<Props of={Authentication} isToggle title="Props" />

---

## LoginForm

The LoginForm component returns the form fields upon submission to the callback.

<Playground>
<Paper>
  <LoginForm
    config={{server:'https://bg.door43.org'}}
    actionText="Sign in"
    onSubmit={(formData) => {
      alert(JSON.stringify(formData, null, 2));
    }}
  />
</Paper>
</Playground>

<Props of={LoginForm} isToggle title="Props" />
