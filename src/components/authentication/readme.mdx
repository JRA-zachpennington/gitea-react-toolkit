---
name: Authentication
route: /authentication
---

import { Playground, Props } from 'docz';
import { Paper, Card, CardContent, CardHeader } from '@material-ui/core';
import { withAuthentication, Authentication, LoginForm, FormInput } from './';

# Authentication Components

## withAuthentication

You can wrap any component with `withAuthentication` so that you can require authentication for the component.
It will also give access to the authentication object through the props of the children.
If not already authenticated, it will render the Authenticaiton component.

<Playground>
{() => {
  // Define your React component and optionally access authentication in props.
  function Component({
    message,
    authentication: {
      user,
      token,
    },
  }) {
    return (
      <Card>
        <CardHeader title="Top Secret Access" />
        <CardContent>
          <div>{user.full_name}: {message}</div>
        </CardContent>
      </Card>
    )
  }
  /** Usually you would wrap it during export at the bottom of your component's file.
   *  export default withAuthentication(Component);
   */
  const AuthenticatedComponent = withAuthentication(Component);
  // Then you can use your authentication wrapped component.
  return (
    <Paper>
      <AuthenticatedComponent
        authenticationConfig={{
          tokenid: "PlaygroundTesting",
          server: "https://bg.door43.org",
        }}
        message="Authenticated!"
      />
    </Paper>
  );
}}
</Playground>

## Authentication

This is a functional Authentication component that logs into a Gitea server.
The Authentication component wraps the LoginForm component.

<Playground>
<Paper>
  <Authentication
    messages={{
      actionText:"Authenticate",
      genericError: "Something happened!",
      usernameError: "No user found?",
      passwordError: "Did you fat finger your password?",
    }}
    config={{
      server: "https://bg.door43.org",
      tokenid:"PlaygroundTesting",
    }}
    onAuthentication={(data) => {
      alert(JSON.stringify(data, null, 2));
    }}
  />
</Paper>
</Playground>

<Props of={Authentication} />

---

## LoginForm

The LoginForm component returns the form fields upon submission to the callback.

<Playground>
<Paper>
  <LoginForm
    actionText="Sign in"
    onSubmit={(formData) => {
      alert(JSON.stringify(formData, null, 2));
    }}
  />
</Paper>
</Playground>

<Props of={LoginForm} />

---

## FormInput

FormInput component enforces consistency for text input, and change propogation.

<Playground>
<Paper style={{margin: '1em'}}>
  <FormInput
    id="email"
    type="email"
    label="Email Address"
    onChange={(event) => {
      alert(event.target.value);
    }}
  />
</Paper>
<Paper style={{margin: '1em'}}>
  <FormInput
    id="password"
    type="password"
    label="Password"
    onChange={(event) => {
      // alert("Commented out to not trigger on autofill.");
    }}
  />
</Paper>
</Playground>

<Props of={FormInput} />
