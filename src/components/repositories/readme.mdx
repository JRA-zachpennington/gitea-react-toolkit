---
name: Repositories
route: /repositories
---
import { useState } from 'react';
import { Playground, Props } from 'docz';
import { Paper, Card, CardContent, CardHeader, Avatar } from '@material-ui/core';
import { Repositories, Repository, SearchForm, Search, withRepository } from './';
import moment from 'moment';

import repositoryData from './repositoryData.json';

# Repository Components

## withRepository

You can wrap any component with `withRepository` so that you can require a repository object for the component.
It will also give access to the selected repository object through the props of the children.
If a repository is not already selected, it will render the Search or Repositories component depending on the repositoryConfig.

<Playground>
{() => {
  // Define your React component and optionally access repository in props.
  function Component({
    repository,
  }) {
    return (
      <Card>
        <CardHeader title={<strong>{repository.full_name}</strong>} subheader={moment(repository.created_at).format('MMMM Do YYYY, h:mm:ss a')} avatar={<Avatar src={repository.owner.avatar_url} />} />
        <CardContent>
          <pre>{JSON.stringify(repository, null, 2)}</pre>
        </CardContent>
      </Card>
    )
  }
  /** Usually you would wrap it during export at the bottom of your component's file.
   *  export default withRepository(Component);
   */
  const RepositoryComponent = withRepository(Component);
  // Then you can use your repository wrapped component.
  return (
    <Paper>
      <RepositoryComponent
        //** Pass any props as you normally would. */
        repositoryConfig={{
          defaultOwner:"unfoldingWord",
          defaultQuery:"en_ta",
          server: "https://git.door43.org",
        }}
        /** Pass a previously returned repository object to skip repository selection.
          repository={repository}
          */
      />
    </Paper>
  );
}}
</Playground>

<Props of={withRepository} isToggle title="Props" />

## Search Component

The Search component brings together the SearchForm and Repositories components.

<Playground>
<Paper>
  <Search
    defaultOwner="unfoldingword"
    defaultQuery="en_ta"
    onRepository={(data) => {
      alert(JSON.stringify(data, null, 2));
    }}
    config={{server: "https://git.door43.org"}}
  />
</Paper>
</Playground>

<Props of={Search} isToggle title="Props" />

## SearchForm

The SearchForm component will make a search api call and return the resulting repositories array.

<Playground>
{() => {
  function Repos() {
    const [repos, setRepos] = useState([]);

    const searchFormComponent = (
      <SearchForm
        defaultOwner="unfoldingword"
        defaultQuery="en_ta"
        onRepositories={setRepos}
        config={{server: "https://git.door43.org"}}
      />
    );

    const repositoriesComponent = (
      <pre>{JSON.stringify(repos, null, 2)}</pre>
    );

    return (
      <div>
        <h3>SearchForm:</h3>
        <Paper>
          {searchFormComponent}
        </Paper>
        <h3>Search Results:</h3>
        <Paper>
          {repositoriesComponent}
        </Paper>
      </div>
    )
  }

  return (
    <Repos />
  );
}}

</Playground>

<Props of={SearchForm} isToggle title="Props" />

## Repositories

The Repositories component renders a list of Repository components.

<Playground>
<Paper>
  <Repositories
    urls={
      [
        "https://git.door43.org/api/v1/repos/unfoldingWord/en_ta",
        "https://git.door43.org/api/v1/repos/unfoldingWord/en_tw",
        "https://git.door43.org/api/v1/repos/unfoldingWord/en_tn",
        "https://git.door43.org/api/v1/repos/unfoldingWord/en_obs",
        "https://git.door43.org/api/v1/repos/door43-catalog/en_ta",
        "https://git.door43.org/api/v1/repos/door43-catalog/en_tw",
        "https://git.door43.org/api/v1/repos/door43-catalog/en_tn",
        "https://git.door43.org/api/v1/repos/door43-catalog/en_obs",
      ]
    }
    onRepository={(data) => {
      alert(JSON.stringify(data, null, 2));
    }}
  />
</Paper>
</Playground>

<Props of={Repositories} isToggle title="Props" />

## Repository

The Repository component renders the attributes of a repository as a list item.

Providing data directly as props.

<Playground>
<Paper>
  <Repository
    repository={repositoryData}
    onRepository={(data) => {
      alert(JSON.stringify(data, null, 2));
    }}
  />
</Paper>
</Playground>

Providing url to fetch repository data.

<Playground>
<Paper>
  <Repository
    url="https://git.door43.org/api/v1/repos/door43-catalog/en_ta"
    onRepository={(data) => {
      alert(JSON.stringify(data, null, 2));
    }}
  />
</Paper>
</Playground>

<Props of={Repository} isToggle title="Props" />
